<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Color Palette Generator</title>
    <link rel="stylesheet" href="/src/index.css" />
  </head>
  <body>
    <main>
      <header>
        <div class="header-content">
          <h1>AI Color Palette Generator</h1>
          <button id="api-key-button" class="api-key-button" aria-label="Set API Key">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
            </svg>
          </button>
        </div>
        <p>Describe a theme or upload an image to generate a beautiful color palette.</p>
      </header>
      <form id="prompt-form">
        <div class="input-controls">
            <input
              type="text"
              id="prompt-input"
              placeholder="e.g., a serene beach at sunset"
              aria-label="Color palette theme"
            />
            <input type="file" id="image-upload" accept="image/*" hidden />
            <label for="image-upload" id="image-upload-label" class="button-secondary" role="button" aria-label="Upload an image">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>
              <span>Upload</span>
            </label>
        </div>

        <div id="image-preview-container" style="display: none;">
            <img id="image-preview" src="" alt="Image preview" />
            <button type="button" id="remove-image-button" aria-label="Remove image">&times;</button>
        </div>

        <div class="settings-row">
            <select id="color-mode-select" aria-label="Terminal color style">
              <option value="vibrant" selected>Vibrant Theme (For Terminals)</option>
              <option value="harmonious">Harmonious Theme (Wallpaper Style)</option>
            </select>
            <select id="model-select" aria-label="Select AI Model">
              <option value="gemini-2.5-flash" selected>Gemini 2.5 Flash</option>
              <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
            </select>
            <select id="icon-theme-select" aria-label="Select Icon Theme" disabled>
              <option value="">Generate theme first</option>
              <!-- Options will be dynamically populated by JavaScript -->
            </select>
        </div>

        <button type="submit" id="generate-button" aria-label="Generate palette">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path></svg>
          <span>Generate</span>
        </button>
      </form>
      <div id="loader" class="loader" role="status" aria-live="polite" style="display: none;"></div>
      <div id="error-container" class="error-message" role="alert"></div>
      <section id="palette-container" aria-live="polite"></section>
      <div id="download-container" style="display: none;">
        <button id="download-button" class="button-secondary">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
            <span>Download Theme Files</span>
        </button>
      </div>
    </main>
    <!-- API Key Modal -->
    <div id="api-key-modal" class="api-key-modal" style="display: none;">
      <div class="api-key-content">
        <h2>Set Your Gemini API Key</h2>
        <p>Enter your Google Gemini API key to generate color palettes. Your key is stored locally and never sent to any server.</p>
        <input
          type="password"
          id="api-key-input"
          class="api-key-input"
          placeholder="Enter your Gemini API key"
        />
        <div id="api-key-error" class="api-key-error">Please enter a valid API key</div>
        <div class="api-key-buttons">
          <button id="cancel-api-key" class="cancel-button">Cancel</button>
          <button id="save-api-key" class="save-button">Save</button>
        </div>
      </div>
    </div>
    <script type="module" src="/src/index.tsx"></script>
  </body>
</html>